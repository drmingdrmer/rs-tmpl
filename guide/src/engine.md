```bob

   API  ---------------.
    |                  |                .-------------.
    |                  +---------+------| Timer       |<------.
    |                  |         |      '-------------'       |
    |                  |         |                            |
    |                  v         |                            |
    |               .-----.      |      .-------------.       |
    |               | msg |      +------| Store       |<------+
    |               | msg |      |      '-------------'       |
    |        .-----o| msg |      |                            |
    |        |      | ... |      |                            |
    |        |      '-----'      |                            |
    v        |         |         |      .-------------.       |
 .-----.     |         |         +------| Replication |<------+
 |entry|<----+         v         |      '-------------'       |
 |entry|     |     .--------.    |      .-------------.       |
 |entry|     |     |        |    +------| Replication |<------+
 | ... |     |     | Engine |    |      '-------------'       |
 '-----'     |     |        |    |                            |
             |     '--------'    |                            |
             |         |         |                            |
             |         |         |      .-------------.       |
             |         v         '------| Build       |<------+
             |      .-----.             | Snapshot    |       |
             '-----o| cmd |             '-------------'       |
                    | cmd |                                   |
                    | cmd |                                   |
                    | ... |                                   |
                    '-----'                                   |
                       |                                      |
                       '--------------------------------------'



```
